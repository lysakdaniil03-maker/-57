<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Учительский помощник - профессиональные инструменты для педагогов</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #2c5aa0;
            --primary-light: #3a7bd5;
            --secondary: #f0f7ff;
            --accent: #4CAF50;
            --accent-light: #66BB6A;
            --warning: #FF9800;
            --music: #9c27b0;
            --max-color: #FF5722;
            --max-color-light: #FF8A65;
            --text: #333;
            --text-light: #666;
            --white: #ffffff;
            --border: #d0e3ff;
            --shadow: rgba(0, 0, 0, 0.08);
            --shadow-hover: rgba(0, 0, 0, 0.12);
            --radius: 15px;
            --transition: all 0.3s ease;
        }
        
        body {
            background: linear-gradient(135deg, #f5f9ff 0%, #e8f1ff 100%);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: var(--white);
            padding: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.2rem;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px;
            border-radius: 50%;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .logo p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }
        
        nav a {
            color: var(--white);
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            transition: var(--transition);
            padding: 8px 15px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        nav a:hover, nav a.active {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.95)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23f5f9ff"/><path d="M0,0 L100,100 M100,0 L0,100" stroke="%23d0e3ff" stroke-width="1"/></svg>');
            padding: 70px 0;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }
        
        .hero h2 {
            font-size: 2.8rem;
            color: var(--primary);
            margin-bottom: 15px;
            font-weight: 800;
        }
        
        .hero p {
            font-size: 1.3rem;
            color: var(--text-light);
            max-width: 800px;
            margin: 0 auto 30px;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(to right, var(--primary), var(--primary-light));
            color: var(--white);
            padding: 16px 35px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(44, 90, 160, 0.3);
            transition: var(--transition);
            border: none;
            cursor: pointer;
        }
        
        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(44, 90, 160, 0.4);
        }
        
        /* Tools Section */
        .section-title {
            text-align: center;
            margin: 60px 0 40px;
            color: var(--primary);
            font-size: 2.3rem;
            position: relative;
            font-weight: 700;
        }
        
        .section-title:after {
            content: '';
            display: block;
            width: 100px;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--primary-light));
            margin: 15px auto;
            border-radius: 3px;
        }
        
        .max-section-title {
            text-align: center;
            margin: 60px 0 40px;
            color: var(--max-color);
            font-size: 2.3rem;
            position: relative;
            font-weight: 700;
        }
        
        .max-section-title:after {
            content: '';
            display: block;
            width: 100px;
            height: 5px;
            background: linear-gradient(to right, var(--max-color), var(--max-color-light));
            margin: 15px auto;
            border-radius: 3px;
        }
        
        /* Планировщик уроков */
        .planner-container {
            background-color: var(--white);
            border-radius: var(--radius);
            padding: 35px;
            box-shadow: 0 10px 30px var(--shadow);
            margin-bottom: 60px;
            border: 1px solid var(--border);
            transition: var(--transition);
        }
        
        .planner-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        
        .planner-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .planner-header h3 {
            color: var(--primary);
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .planner-controls {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
        }
        
        .control-group label {
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text);
            font-size: 1rem;
        }
        
        .control-group input, .control-group select, .control-group textarea {
            padding: 14px 18px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            transition: var(--transition);
            background-color: var(--secondary);
        }
        
        .control-group input:focus, .control-group select:focus, .control-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
        }
        
        .control-group textarea {
            min-height: 130px;
            resize: vertical;
        }
        
        .planner-output {
            background-color: var(--secondary);
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 30px;
            margin-top: 25px;
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 14px 28px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            font-size: 1rem;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, var(--primary), var(--primary-light));
            color: var(--white);
            box-shadow: 0 4px 12px rgba(44, 90, 160, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(44, 90, 160, 0.4);
        }
        
        .btn-secondary {
            background-color: var(--white);
            color: var(--primary);
            border: 2px solid var(--border);
        }
        
        .btn-secondary:hover {
            background-color: var(--secondary);
            transform: translateY(-3px);
        }
        
        .btn-export {
            background: linear-gradient(to right, #4CAF50, #66BB6A);
            color: var(--white);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }
        
        .btn-export:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        
        /* Генератор заданий */
        .generator-container {
            background-color: var(--white);
            border-radius: var(--radius);
            padding: 35px;
            box-shadow: 0 10px 30px var(--shadow);
            margin-bottom: 60px;
            border: 1px solid var(--border);
            transition: var(--transition);
        }
        
        .generator-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        
        .generator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .generator-header h3 {
            color: var(--primary);
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .generator-controls {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .generator-output {
            background-color: var(--secondary);
            border: 2px dashed var(--border);
            border-radius: 10px;
            padding: 30px;
            min-height: 250px;
            margin-top: 25px;
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        /* Встроенный Word-редактор */
        .word-editor-container {
            background-color: var(--white);
            border-radius: var(--radius);
            padding: 35px;
            box-shadow: 0 10px 30px var(--shadow);
            margin-bottom: 60px;
            border: 1px solid var(--border);
            transition: var(--transition);
        }
        
        .word-editor-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        
        /* Раздел Браузера */
        .max-container {
            background-color: var(--white);
            border-radius: var(--radius);
            padding: 35px;
            box-shadow: 0 10px 30px var(--shadow);
            margin-bottom: 60px;
            border: 1px solid var(--border);
            transition: var(--transition);
            border-top: 5px solid var(--max-color);
        }
        
        .max-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(255, 87, 34, 0.1);
        }
        
        .max-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .max-header h3 {
            color: var(--max-color);
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .max-browser {
            background-color: #f5f5f5;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .browser-toolbar {
            background: linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(20, 20, 20, 0.95) 100%);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            gap: 14px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
        }
        
        .browser-toolbar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        }
        
        .browser-controls {
            display: flex;
            gap: 10px;
            margin-right: 5px;
        }
        
        .browser-control {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .browser-control:hover {
            transform: scale(1.15);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
        }
        
        .browser-control.close {
            background: linear-gradient(135deg, #ff5f57 0%, #ff3b30 100%);
        }
        
        .browser-control.close:hover {
            background: linear-gradient(135deg, #ff3b30 0%, #ff1a0d 100%);
        }
        
        .browser-control.minimize {
            background: linear-gradient(135deg, #ffbd2e 0%, #ffa500 100%);
        }
        
        .browser-control.minimize:hover {
            background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);
        }
        
        .browser-control.maximize {
            background: linear-gradient(135deg, #28ca42 0%, #1db954 100%);
        }
        
        .browser-control.maximize:hover {
            background: linear-gradient(135deg, #1db954 0%, #1aa34a 100%);
        }
        
        .browser-url-bar {
            flex: 1;
            background: rgba(40, 40, 40, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 28px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 14px;
            color: #fff;
            font-size: 0.95rem;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3), 
                        0 2px 12px rgba(0, 0, 0, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .browser-url-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .browser-url-bar:focus-within {
            background: rgba(50, 50, 50, 0.9);
            border-color: rgba(100, 181, 246, 0.4);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3), 
                        0 0 0 3px rgba(100, 181, 246, 0.2),
                        0 4px 16px rgba(100, 181, 246, 0.15);
            transform: translateY(-1px);
        }
        
        .browser-url-bar:focus-within::before {
            left: 100%;
        }
        
        .browser-url-bar i {
            color: #64b5f6;
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .browser-url-bar:focus-within i {
            color: #90caf9;
            transform: scale(1.1);
        }
        
        .browser-url {
            flex: 1;
            background: none;
            border: none;
            color: #fff;
            font-size: 0.95rem;
            outline: none;
            font-weight: 500;
        }
        
        .browser-url::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .browser-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .browser-action-btn {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            color: #fff;
            cursor: pointer;
            font-size: 1rem;
            padding: 10px 14px;
            border-radius: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 44px;
            height: 44px;
            position: relative;
            overflow: hidden;
        }
        
        .browser-action-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .browser-action-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3), 
                        0 0 0 1px rgba(255, 255, 255, 0.1);
        }
        
        .browser-action-btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .browser-action-btn:active {
            transform: translateY(0) scale(0.98);
        }
        
        .browser-content {
            height: 600px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 50%, #f8f9fa 100%);
            position: relative;
            border-radius: 0 0 var(--radius) var(--radius);
            overflow: hidden;
            box-shadow: inset 0 4px 20px rgba(0, 0, 0, 0.06),
                        0 -2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .browser-frame {
            width: 100%;
            height: 100%;
            border: none;
            background-color: #fff;
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                        transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(1);
        }
        
        .browser-frame[style*="display: none"] {
            opacity: 0;
            transform: scale(0.98);
        }
        
        .browser-loading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(248, 249, 250, 0.95) 0%, rgba(255, 255, 255, 0.95) 100%);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            transition: opacity 0.3s ease;
        }
        
        .browser-loading p {
            color: var(--text);
            font-size: 1.15rem;
            font-weight: 600;
            margin-top: 24px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: pulse 2s infinite;
            letter-spacing: 0.5px;
        }
        
        .browser-loading.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .browser-error {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 245, 245, 0.95) 0%, rgba(255, 255, 255, 0.95) 100%);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 11;
            text-align: center;
            padding: 50px 40px;
            transition: opacity 0.3s ease;
        }
        
        .browser-error.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .browser-error-icon {
            font-size: 5rem;
            background: linear-gradient(135deg, var(--max-color) 0%, var(--max-color-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 24px;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(255, 87, 34, 0.3));
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .browser-error-text {
            color: var(--text);
            font-size: 1.1rem;
            margin-bottom: 25px;
            max-width: 500px;
        }
        
        .max-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .max-feature {
            background-color: var(--secondary);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--max-color);
            transition: var(--transition);
        }
        
        .max-feature:hover {
            transform: translateY(-5px);
            background-color: #fff5f2;
        }
        
        .max-feature h4 {
            color: var(--max-color);
            margin-bottom: 10px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .max-feature p {
            color: var(--text-light);
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        .editor-toolbar {
            background-color: var(--secondary);
            padding: 18px;
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .toolbar-group {
            display: flex;
            border-right: 1px solid var(--border);
            padding-right: 12px;
            margin-right: 5px;
        }
        
        .toolbar-group:last-child {
            border-right: none;
            padding-right: 0;
            margin-right: 0;
        }
        
        .editor-btn {
            padding: 10px 14px;
            background-color: var(--white);
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            color: var(--text);
            min-width: 40px;
            justify-content: center;
        }
        
        .editor-btn:hover {
            background-color: #e6f0ff;
            transform: translateY(-2px);
        }
        
        .editor-btn.active {
            background-color: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }
        
        #wordEditor {
            width: 100%;
            min-height: 500px;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 25px;
            font-size: 1rem;
            line-height: 1.6;
            background-color: var(--white);
            overflow-y: auto;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        #wordEditor:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
        }
        
        .editor-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        /* Цветовые кнопки */
        .color-picker {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .color-btn {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid var(--border);
            transition: var(--transition);
            position: relative;
        }
        
        .color-btn:hover {
            transform: scale(1.2);
        }
        
        .color-btn.active::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 12px;
            text-shadow: 0 0 2px black;
        }
        
        /* Ползунок наклона текста */
        .rotate-slider {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: var(--white);
            padding: 8px 14px;
            border-radius: 6px;
            border: 1px solid var(--border);
        }
        
        .rotate-slider input {
            width: 120px;
        }
        
        .rotate-value {
            min-width: 35px;
            text-align: center;
            font-weight: 600;
            color: var(--primary);
        }
        
        /* Музыкальный плеер */
        .music-player-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--music), #ba68c8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.4);
            transition: var(--transition);
            border: none;
        }
        
        .music-player-btn:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 8px 25px rgba(156, 39, 176, 0.6);
        }
        
        .music-player-btn.playing {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(156, 39, 176, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(156, 39, 176, 0); }
            100% { box-shadow: 0 0 0 0 rgba(156, 39, 176, 0); }
        }
        
        .music-player-container {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            background: linear-gradient(135deg, #2c003e, #4a0072);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
            z-index: 999;
            display: none;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .music-player-container.show {
            display: block;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .player-header h3 {
            color: white;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .close-player {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.7;
            transition: var(--transition);
        }
        
        .close-player:hover {
            opacity: 1;
            transform: rotate(90deg);
        }
        
        .player-controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .track-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .track-name {
            font-size: 1.1rem;
            margin-bottom: 5px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .track-status {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .player-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }
        
        .player-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .player-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        
        .player-btn.play-pause {
            width: 60px;
            height: 60px;
            background: var(--music);
            font-size: 1.5rem;
        }
        
        .player-btn.play-pause:hover {
            background: #ba68c8;
        }
        
        .progress-container {
            width: 100%;
            margin: 15px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
            cursor: pointer;
        }
        
        .progress {
            height: 100%;
            background: var(--music);
            width: 0%;
            transition: width 0.1s linear;
        }
        
        .time-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .volume-control i {
            opacity: 0.8;
        }
        
        .volume-slider {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
        }
        
        .upload-btn {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .upload-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .upload-input {
            display: none;
        }
        
        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: var(--white);
            padding: 50px 0 25px;
            margin-top: 80px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 35px;
            margin-bottom: 35px;
        }
        
        .footer-column h3 {
            font-size: 1.4rem;
            margin-bottom: 25px;
            position: relative;
            padding-bottom: 12px;
            font-weight: 700;
        }
        
        .footer-column h3:after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 3px;
            background-color: rgba(255, 255, 255, 0.5);
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .footer-column a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            transition: var(--transition);
        }
        
        .footer-column a:hover {
            color: var(--white);
            padding-left: 8px;
        }
        
        .authors-list {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            border-left: 4px solid var(--accent);
        }
        
        .author-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            padding: 8px 12px;
            border-radius: 6px;
            background-color: rgba(255, 255, 255, 0.05);
            transition: var(--transition);
        }
        
        .author-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .author-item:last-child {
            margin-bottom: 0;
        }
        
        .author-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-light), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .telegram-channel {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #0088cc;
        }
        
        .telegram-channel h4 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .hero h2 {
                font-size: 2.3rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .section-title, .max-section-title {
                font-size: 2rem;
            }
            
            .music-player-container {
                width: 320px;
                right: 20px;
                bottom: 90px;
            }
            
            .browser-content {
                height: 500px;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            nav ul {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
                gap: 15px;
            }
            
            nav a {
                padding: 6px 12px;
                font-size: 0.95rem;
            }
            
            .hero {
                padding: 50px 0;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .planner-header, .generator-header, .max-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .action-buttons, .editor-footer {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .editor-toolbar {
                justify-content: center;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .music-player-container {
                width: calc(100% - 40px);
                right: 20px;
                left: 20px;
                bottom: 100px;
            }
            
            .music-player-btn {
                bottom: 20px;
                right: 20px;
            }
            
            .browser-content {
                height: 400px;
            }
            
            .max-features {
                grid-template-columns: 1fr;
            }
        }
        
        /* Анимации */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Стили для сообщений */
        .message {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .message.success {
            background-color: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent);
            color: #2e7d32;
        }
        
        .message.info {
            background-color: rgba(44, 90, 160, 0.1);
            border-left: 4px solid var(--primary);
            color: var(--primary);
        }
        
        .message.warning {
            background-color: rgba(255, 152, 0, 0.1);
            border-left: 4px solid var(--warning);
            color: #E65100;
        }
        
        /* Счетчик символов */
        #charCount {
            background-color: var(--secondary);
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            color: var(--primary);
        }
        
        /* Загрузка PDF */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            color: white;
            display: none;
        }
        
        .loading-overlay.show {
            display: flex;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Стили для загрузки браузера */
        .dot-spinner {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--max-color) 0%, var(--max-color-light) 100%);
            animation: dot-pulse 1.5s infinite ease-in-out;
            box-shadow: 0 2px 8px rgba(255, 87, 34, 0.4);
        }
        
        .dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        .dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes dot-pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.7; }
        }
        
        /* Стили для полноэкранного режима браузера */
        .fullscreen-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            background: white;
            margin: 0 !important;
            padding: 0 !important;
            border-radius: 0 !important;
            border: none !important;
        }
        
        .fullscreen-mode .max-browser {
            width: 100vw;
            height: 100vh;
            margin: 0;
            border-radius: 0;
        }
        
        .fullscreen-mode .browser-content {
            height: calc(100vh - 50px) !important;
        }
        
        .fullscreen-mode .max-header,
        .fullscreen-mode .max-features {
            display: none;
        }
        
        .fullscreen-exit-btn {
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 10000;
            background: var(--max-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transition: var(--transition);
        }
        
        .fullscreen-exit-btn:hover {
            background: var(--max-color-light);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-chalkboard-teacher"></i>
                <div>
                    <h1>Учительский помощник</h1>
                    <p>Профессиональные инструменты для педагогов</p>
                </div>
            </div>
            <nav>
                <ul>
                    <li><a href="#planner" class="active"><i class="fas fa-calendar-alt"></i> Планировщик</a></li>
                    <li><a href="#generator"><i class="fas fa-magic"></i> Генератор</a></li>
                    <li><a href="#word"><i class="fas fa-file-word"></i> Редактор</a></li>
                    <li><a href="#browser"><i class="fas fa-globe"></i> Браузер</a></li>
                </ul>
            </nav>
        </div>
</header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h2>Профессиональные инструменты для учителей</h2>
            <p>Планировщик уроков, генератор заданий, текстовый редактор и встроенный браузер для эффективной работы педагога. Все инструменты доступны онлайн и не требуют установки.</p>
            <a href="#planner" class="cta-button">Начать использовать</a>
        </div>
    </section>

    <!-- Планировщик уроков -->
    <section class="container" id="planner">
        <h2 class="section-title">Планировщик уроков</h2>
        <div class="planner-container fade-in">
            <div class="planner-header">
                <h3>Создайте подробный план урока</h3>
                <div class="action-buttons">
                    <button class="btn btn-export" id="exportPdfBtn">
                        <i class="fas fa-file-pdf"></i> Экспорт в PDF
                    </button>
                    <button class="btn btn-export" id="exportWordBtn">
                        <i class="fas fa-file-word"></i> Экспорт в Word
                    </button>
                </div>
            </div>
            
            <div class="planner-controls">
                <div class="control-group">
                    <label for="lessonTheme">Тема урока:</label>
                    <input type="text" id="lessonTheme" placeholder="Введите тему урока" value="Решение линейных уравнений">
                </div>
                
                <div class="control-group">
                    <label for="lessonSubject">Предмет:</label>
                    <select id="lessonSubject">
                        <option value="math">Математика</option>
                        <option value="russian">Русский язык</option>
                        <option value="literature">Литература</option>
                        <option value="history">История</option>
                        <option value="biology">Биология</option>
                        <option value="physics">Физика</option>
                        <option value="english">Английский язык</option>
                        <option value="geography">География</option>
                        <option value="chemistry">Химия</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="lessonGrade">Класс:</label>
                    <select id="lessonGrade">
                        <option value="1">1 класс</option>
                        <option value="2">2 класс</option>
                        <option value="3">3 класс</option>
                        <option value="4">4 класс</option>
                        <option value="5">5 класс</option>
                        <option value="6" selected>6 класс</option>
                        <option value="7">7 класс</option>
                        <option value="8">8 класс</option>
                        <option value="9">9 класс</option>
                        <option value="10">10 класс</option>
                        <option value="11">11 класс</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="lessonDuration">Продолжительность (мин):</label>
                    <input type="number" id="lessonDuration" min="20" max="120" value="45">
                </div>
                
                <div class="control-group">
                    <label for="lessonGoals">Цели урока:</label>
                    <textarea id="lessonGoals" placeholder="Сформулируйте цели урока">1. Обучающая: научить решать линейные уравнения с одной переменной.
2. Развивающая: развивать логическое мышление и математическую речь.
3. Воспитательная: воспитать аккуратность и внимательность при решении уравнений.</textarea>
                </div>
                
                <div class="control-group">
                    <label for="lessonMaterials">Материалы и оборудование:</label>
                    <textarea id="lessonMaterials" placeholder="Укажите необходимые материалы">Учебник, рабочая тетрадь, проектор, интерактивная доска, раздаточный материал с заданиями, карточки для самостоятельной работы.</textarea>
                </div>
                
                <div class="control-group">
                    <label for="lessonTasks">Задания во время урока:</label>
                    <textarea id="lessonTasks" placeholder="Опишите задания, которые ученики будут выполнять на уроке">1. Разминка: устное решение простых уравнений (5 мин)
2. Изучение нового материала: объяснение алгоритма решения линейных уравнений (15 мин)
3. Практическая работа: решение уравнений у доски (10 мин)
4. Самостоятельная работа: индивидуальное решение уравнений (10 мин)
5. Проверка и разбор ошибок (5 мин)</textarea>
                </div>
                
                <div class="control-group">
                    <label for="lessonHomework">Домашнее задание:</label>
                    <textarea id="lessonHomework" placeholder="Опишите домашнее задание">Учебник: стр. 56-58, № 124, 126, 128. Творческое задание: составить 3 линейных уравнения и решить их.</textarea>
                </div>
            </div>
            
            <button class="btn btn-primary" id="previewPlanBtn">
                <i class="fas fa-eye"></i> Предварительный просмотр
            </button>
            
            <div class="planner-output" id="planOutput">
                <p class="message info">
                    <i class="fas fa-info-circle"></i>
                    Заполните форму и нажмите "Предварительный просмотр" для создания плана урока.
                </p>
            </div>
        </div>
    </section>

    <!-- Генератор заданий -->
    <section class="container" id="generator">
        <h2 class="section-title">Генератор заданий</h2>
        <div class="generator-container fade-in">
            <div class="generator-header">
                <h3>Создайте тематические задания для учеников</h3>
                <div class="action-buttons">
                    <button class="btn btn-secondary" id="copyTasksBtn">
                        <i class="far fa-copy"></i> Копировать
                    </button>
                    <button class="btn btn-secondary" id="printTasksBtn">
                        <i class="fas fa-print"></i> Печать
                    </button>
                </div>
            </div>
            
            <div class="generator-controls">
                <div class="control-group">
                    <label for="subject">Предмет:</label>
                    <select id="subject">
                        <option value="math">Математика</option>
                        <option value="russian">Русский язык</option>
                        <option value="literature">Литература</option>
                        <option value="history">История</option>
                        <option value="biology">Биология</option>
                        <option value="physics">Физика</option>
                        <option value="english">Английский язык</option>
                        <option value="geography">География</option>
                        <option value="chemistry">Химия</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="grade">Класс:</label>
                    <select id="grade">
                        <option value="1">1 класс</option>
                        <option value="2">2 класс</option>
                        <option value="3">3 класс</option>
                        <option value="4">4 класс</option>
                        <option value="5">5 класс</option>
                        <option value="6" selected>6 класс</option>
                        <option value="7">7 класс</option>
                        <option value="8">8 класс</option>
                        <option value="9">9 класс</option>
                        <option value="10">10 класс</option>
                        <option value="11">11 класс</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="taskType">Тип задания:</label>
                    <select id="taskType">
                        <option value="test">Тест с выбором ответа</option>
                        <option value="open">Вопросы с развернутым ответом</option>
                        <option value="problem">Практические задачи</option>
                        <option value="creative">Творческое задание</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="taskCount">Количество заданий:</label>
                    <input type="number" id="taskCount" min="1" max="15" value="5">
                </div>
                
                <div class="control-group">
                    <label for="difficulty">Сложность:</label>
                    <select id="difficulty">
                        <option value="easy">Базовая</option>
                        <option value="medium" selected>Средняя</option>
                        <option value="hard">Повышенная</option>
                    </select>
                </div>
            </div>
            
            <button class="btn btn-primary" id="generateTasksBtn">
                <i class="fas fa-bolt"></i> Сгенерировать задания
            </button>
            
            <div class="generator-output" id="taskOutput">
                <p class="message info">
                    <i class="fas fa-info-circle"></i>
                    Выберите предмет, класс и параметры, затем нажмите "Сгенерировать задания". Система создаст тематические задания, соответствующие выбранному классу.
                </p>
            </div>
        </div>
    </section>

    <!-- Встроенный Word-редактор -->
    <section class="container" id="word">
        <h2 class="section-title">Текстовый редактор</h2>
        <div class="word-editor-container fade-in">
            <div class="editor-toolbar">
                <div class="toolbar-group">
                    <button class="editor-btn" id="boldBtn" title="Жирный (Ctrl+B)">
                        <i class="fas fa-bold"></i>
                    </button>
                    <button class="editor-btn" id="italicBtn" title="Курсив (Ctrl+I)">
                        <i class="fas fa-italic"></i>
                    </button>
                    <button class="editor-btn" id="underlineBtn" title="Подчеркивание (Ctrl+U)">
                        <i class="fas fa-underline"></i>
                    </button>
                </div>
                
                <div class="toolbar-group">
                    <button class="editor-btn" id="alignLeftBtn" title="Выравнивание по левому краю">
                        <i class="fas fa-align-left"></i>
                    </button>
                    <button class="editor-btn" id="alignCenterBtn" title="Выравнивание по центру">
                        <i class="fas fa-align-center"></i>
                    </button>
                    <button class="editor-btn" id="alignRightBtn" title="Выравнивание по правому краю">
                        <i class="fas fa-align-right"></i>
                    </button>
                    <button class="editor-btn" id="justifyBtn" title="Выравнивание по ширине">
                        <i class="fas fa-align-justify"></i>
                    </button>
                </div>
                
                <div class="toolbar-group">
                    <button class="editor-btn" id="bulletListBtn" title="Маркированный список">
                        <i class="fas fa-list-ul"></i>
                    </button>
                    <button class="editor-btn" id="numberListBtn" title="Нумерованный список">
                        <i class="fas fa-list-ol"></i>
                    </button>
                    <button class="editor-btn" id="indentBtn" title="Увеличить отступ">
                        <i class="fas fa-indent"></i>
                    </button>
                    <button class="editor-btn" id="outdentBtn" title="Уменьшить отступ">
                        <i class="fas fa-outdent"></i>
                    </button>
                </div>
                
                <div class="toolbar-group">
                    <select id="fontFamily" class="editor-btn" title="Шрифт">
                        <option value="Arial" selected>Arial</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Courier New">Courier New</option>
                        <option value="Verdana">Verdana</option>
                        <option value="Tahoma">Tahoma</option>
                    </select>
                    
                    <select id="fontSize" class="editor-btn" title="Размер шрифта">
                        <option value="1">8pt</option>
                        <option value="2">10pt</option>
                        <option value="3" selected>12pt</option>
                        <option value="4">14pt</option>
                        <option value="5">16pt</option>
                        <option value="6">18pt</option>
                        <option value="7">24pt</option>
                    </select>
                </div>
                
                <div class="toolbar-group color-picker">
                    <div class="color-btn" style="background-color: #000000;" data-color="#000000" title="Черный" id="colorBlack"></div>
                    <div class="color-btn" style="background-color: #ff0000;" data-color="#ff0000" title="Красный" id="colorRed"></div>
                    <div class="color-btn" style="background-color: #0000ff;" data-color="#0000ff" title="Синий" id="colorBlue"></div>
                    <div class="color-btn" style="background-color: #008000;" data-color="#008000" title="Зеленый" id="colorGreen"></div>
                    <div class="color-btn" style="background-color: #800080;" data-color="#800080" title="Фиолетовый" id="colorPurple"></div>
                    <div class="color-btn" style="background-color: #FF9800;" data-color="#FF9800" title="Оранжевый" id="colorOrange"></div>
                </div>
                
                <div class="toolbar-group">
                    <div class="rotate-slider">
                        <i class="fas fa-sliders-h"></i>
                        <input type="range" id="textRotate" min="-45" max="45" value="0" title="Угол наклона текста">
                        <span class="rotate-value" id="rotateValue">0°</span>
                    </div>
                </div>
                
                <div class="toolbar-group">
                    <button class="editor-btn" id="clearFormatBtn" title="Очистить форматирование">
                        <i class="fas fa-eraser"></i>
                    </button>
                    <button class="editor-btn" id="undoBtn" title="Отменить (Ctrl+Z)">
                        <i class="fas fa-undo"></i>
                    </button>
                    <button class="editor-btn" id="redoBtn" title="Повторить (Ctrl+Y)">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>
            </div>
            
            <div id="wordEditor" contenteditable="true">
                <h2 style="text-align: center; color: #2c5aa0;">Документ для учителя</h2>
                <p>Добро пожаловать в текстовый редактор! Здесь вы можете создавать и редактировать документы, планы уроков, методические материалы и многое другое.</p>
                <p><strong>Пример использования:</strong></p>
                <ul>
                    <li>Создание планов уроков и учебных программ</li>
                    <li>Разработка заданий и контрольных работ для учеников</li>
                    <li>Подготовка методических материалов и рекомендаций</li>
                    <li>Написание отчетов, справок и других документов</li>
                </ul>
                <p><em>Используйте панель инструментов для форматирования текста. Все изменения сохраняются автоматически в вашем браузере.</em></p>
                <hr>
                <p>Попробуйте изменить:</p>
                <ol>
                    <li>Шрифт и размер текста</li>
                    <li>Цвет и начертание (жирный, курсив, подчеркивание)</li>
                    <li>Выравнивание и отступы</li>
                    <li>Угол наклона текста с помощью ползунка</li>
                </ol>
            </div>
            
            <div class="editor-footer">
                <div class="action-buttons">
                    <button class="btn btn-secondary" id="saveDocBtn">
                        <i class="fas fa-save"></i> Сохранить документ
                    </button>
                    <button class="btn btn-primary" id="exportDocBtn">
                        <i class="fas fa-file-word"></i> Экспорт в Word
                    </button>
                </div>
                <div id="charCount">Символов: 0</div>
            </div>
        </div>
    </section>

    <!-- Раздел Браузер -->
    <section class="container" id="browser">
        <h2 class="max-section-title">Браузер</h2>
        <div class="max-container fade-in" id="browserContainer">
            <div class="max-header">
                <h3><i class="fas fa-globe"></i> Встроенный браузер</h3>
                <div class="action-buttons">
                    <button class="btn btn-primary" id="refreshBrowser">
                        <i class="fas fa-redo"></i> Обновить
                    </button>
                    <button class="btn btn-secondary" id="fullscreenBtn">
                        <i class="fas fa-expand"></i> Полный экран
                    </button>
                </div>
            </div>
            
            <div class="max-browser">
                <div class="browser-toolbar">
                    <div class="browser-controls">
                        <div class="browser-control close" id="browserClose"></div>
                        <div class="browser-control minimize" id="browserMinimize"></div>
                        <div class="browser-control maximize" id="browserMaximize"></div>
                    </div>
                    
                    <div class="browser-url-bar">
                        <i class="fas fa-lock"></i>
                        <input type="text" class="browser-url" id="browserUrl" value="https://www.google.com" placeholder="Введите URL сайта">
                    </div>
                    
                    <div class="browser-actions">
                        <button class="browser-action-btn" id="browserBack" title="Назад">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <button class="browser-action-btn" id="browserForward" title="Вперед">
                            <i class="fas fa-arrow-right"></i>
                        </button>
                        <button class="browser-action-btn" id="browserHome" title="Домашняя страница">
                            <i class="fas fa-home"></i>
                        </button>
                        <button class="browser-action-btn" id="browserGo" title="Перейти">
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                
                <div class="browser-content">
                    <div class="browser-loading" id="browserLoading">
                        <div class="dot-spinner">
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                        <p>Загрузка...</p>
                    </div>
                    
                    <div class="browser-error hidden" id="browserError">
                        <div class="browser-error-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h3 style="color: var(--max-color); margin-bottom: 15px;">Не удалось загрузить сайт</h3>
                        <div class="browser-error-text" id="errorText">
                            Сайт может не поддерживать встраивание или заблокирован политиками безопасности.
                        </div>
                        <div class="action-buttons" style="justify-content: center;">
                            <button class="btn btn-primary" id="openInNewTab">
                                <i class="fas fa-external-link-alt"></i> Открыть в новой вкладке
                            </button>
                            <button class="btn btn-secondary" id="reloadPage">
                                <i class="fas fa-redo"></i> Попробовать снова
                            </button>
                        </div>
                    </div>
                    
                    <iframe class="browser-frame" id="browserFrame" src="about:blank" 
                            allow="accelerometer; autoplay; clipboard-read; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen; geolocation; microphone; camera; payment; usb; serial; xr-spatial-tracking; screen-wake-lock; display-capture; cross-origin-isolated"
                            referrerpolicy="no-referrer-when-downgrade"
                            loading="eager"
                            allowfullscreen
                            webkitallowfullscreen
                            mozallowfullscreen
                            style="width: 100%; height: 100%; border: none;"></iframe>
                </div>
            </div>
            
            <div class="max-features">
                <div class="max-feature">
                    <h4><i class="fas fa-shield-alt"></i> Безопасный просмотр</h4>
                    <p>Встроенный браузер обеспечивает безопасный доступ к любым ресурсам без необходимости открывать внешние приложения.</p>
                </div>
                
                <div class="max-feature">
                    <h4><i class="fas fa-bolt"></i> Быстрая загрузка</h4>
                    <p>Оптимизированный для работы с любыми сайтами. Поддерживает все современные веб-технологии.</p>
                </div>
                
                <div class="max-feature">
                    <h4><i class="fas fa-graduation-cap"></i> Для учителей</h4>
                    <p>Идеально подходит для поиска учебных материалов, подготовки к урокам и работы с образовательными платформами.</p>
                </div>
                
                <div class="max-feature">
                    <h4><i class="fas fa-sync-alt"></i> Интеграция</h4>
                    <p>Работает в одном интерфейсе с другими инструментами учителя. Не требует переключения между приложениями.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Кнопка выхода из полноэкранного режима (скрыта по умолчанию) -->
    <button class="fullscreen-exit-btn" id="fullscreenExitBtn" style="display: none;">
        <i class="fas fa-compress"></i> Выйти из полноэкранного режима
    </button>

    <!-- Музыкальный плеер -->
    <button class="music-player-btn" id="musicPlayerBtn">
        <i class="fas fa-music"></i>
    </button>
    
    <div class="music-player-container" id="musicPlayer">
        <div class="player-header">
            <h3><i class="fas fa-headphones-alt"></i> Музыкальный плеер</h3>
            <button class="close-player" id="closePlayer">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="player-controls">
            <div class="track-info">
                <div class="track-name" id="trackName">Трек не выбран</div>
                <div class="track-status" id="trackStatus">Загрузите музыку для работы</div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progressBar">
                    <div class="progress" id="progress"></div>
                </div>
                <div class="time-info">
                    <span id="currentTime">0:00</span>
                    <span id="duration">0:00</span>
                </div>
            </div>
            
            <div class="player-buttons">
                <button class="player-btn" id="prevBtn" title="Предыдущий трек">
                    <i class="fas fa-step-backward"></i>
                </button>
                <button class="player-btn play-pause" id="playPauseBtn" title="Воспроизвести/Пауза">
                    <i class="fas fa-play" id="playIcon"></i>
                </button>
                <button class="player-btn" id="nextBtn" title="Следующий трек">
                    <i class="fas fa-step-forward"></i>
                </button>
            </div>
            
            <div class="volume-control">
                <i class="fas fa-volume-up"></i>
                <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="70" title="Громкость">
            </div>
            
            <label class="upload-btn" for="audioUpload">
                <i class="fas fa-upload"></i>
                Загрузить трек
                <input type="file" class="upload-input" id="audioUpload" accept="audio/*">
            </label>
            
            <audio id="audioPlayer" preload="metadata"></audio>
        </div>
    </div>

    <!-- Overlay для загрузки PDF -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p>Создание PDF документа...</p>
    </div>

    <!-- Footer -->
    <footer id="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Учительский помощник</h3>
                    <p>Профессиональные онлайн-инструменты для педагогов, созданные для облегчения повседневной работы учителя.</p>
                    
                    <div class="telegram-channel">
                        <h4><i class="fab fa-telegram"></i> Новости и обновления</h4>
                        <p>Новости и последние версии этой платформы в Телеграм канале <a href="https://t.me/mod_max_messenger" target="_blank" style="color: #4dabf7;">SafeMax</a> (<a href="https://t.me/mod_max_messenger" target="_blank" style="color: #4dabf7;">https://t.me/mod_max_messenger</a>).</p>
                    </div>
                    
                    <div class="authors-list">
                        <h4 style="margin-bottom: 15px; font-size: 1.2rem;">Авторы проекта:</h4>
                        <div class="author-item">
                            <div class="author-avatar">Д</div>
                            <div>
                                <a href="https://t.me/autobot31rus" target="_blank">https://t.me/autobot31rus</a>
                                <div style="font-size: 0.9rem; opacity: 0.9;">(Данилка)</div>
                            </div>
                        </div>
                        <div class="author-item">
                            <div class="author-avatar">М</div>
                            <div>
                                <a href="https://t.me/randLostname" target="_blank">https://t.me/randLostname</a>
                                <div style="font-size: 0.9rem; opacity: 0.9;">(Максимка)</div>
                            </div>
                        </div>
                        <div class="author-item">
                            <div class="author-avatar">Е</div>
                            <div>
                                <a href="https://t.me/Cheelik228" target="_blank">https://t.me/Cheelik228</a>
                                <div style="font-size: 0.9rem; opacity: 0.9;">(Егорка)</div>
                            </div>
                        </div>
                        <div class="author-item">
                            <div class="author-avatar">M</div>
                            <div>
                                <a href="https://t.me/XDMost" target="_blank">https://t.me/XDMost</a>
                                <div style="font-size: 0.9rem; opacity: 0.9;">(Most "")</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Инструменты</h3>
                    <ul>
                        <li><i class="fas fa-calendar-alt"></i> <a href="#planner">Планировщик уроков</a></li>
                        <li><i class="fas fa-magic"></i> <a href="#generator">Генератор заданий</a></li>
                        <li><i class="fas fa-file-word"></i> <a href="#word">Текстовый редактор</a></li>
                        <li><i class="fas fa-globe"></i> <a href="#browser">Браузер</a></li>
                        <li><i class="fas fa-music"></i> <a href="#musicPlayerBtn">Музыкальный плеер</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Поддержка</h3>
                    <ul>
                        <li><i class="fas fa-exclamation-circle"></i> Если вы выявили ошибку или у вас есть какая-либо идея для улучшения, то обратитесь к одному из авторов.</li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Инициализация jsPDF
        const { jsPDF } = window.jspdf;
        
        // Планировщик уроков
        document.getElementById('previewPlanBtn').addEventListener('click', function() {
            const theme = document.getElementById('lessonTheme').value;
            const subject = document.getElementById('lessonSubject').value;
            const grade = document.getElementById('lessonGrade').value;
            const duration = document.getElementById('lessonDuration').value;
            const goals = document.getElementById('lessonGoals').value;
            const materials = document.getElementById('lessonMaterials').value;
            const tasks = document.getElementById('lessonTasks').value;
            const homework = document.getElementById('lessonHomework').value;
            
            const subjectNames = {
                'math': 'Математика',
                'russian': 'Русский язык',
                'literature': 'Литература',
                'history': 'История',
                'biology': 'Биология',
                'physics': 'Физика',
                'english': 'Английский язык',
                'geography': 'География',
                'chemistry': 'Химия'
            };
            
            let output = `
                <div class="lesson-plan">
                    <h2 style="color: var(--primary); text-align: center; margin-bottom: 25px;">План урока</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                        <div style="background-color: var(--secondary); padding: 15px; border-radius: 10px; border-left: 4px solid var(--primary);">
                            <strong>Предмет:</strong> ${subjectNames[subject]}
                        </div>
                        <div style="background-color: var(--secondary); padding: 15px; border-radius: 10px; border-left: 4px solid var(--primary-light);">
                            <strong>Класс:</strong> ${grade}
                        </div>
                    </div>
                    <div style="background-color: var(--secondary); padding: 20px; border-radius: 10px; margin-bottom: 25px; border-left: 4px solid var(--accent);">
                        <strong>Тема урока:</strong> ${theme}
                    </div>
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 10px;">Цели урока:</h3>
                        <div style="white-space: pre-line; background-color: #f9f9f9; padding: 20px; border-radius: 8px; border: 1px solid var(--border);">${goals}</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                        <div>
                            <h3 style="color: var(--primary); margin-bottom: 10px;">Продолжительность:</h3>
                            <div style="background-color: #f9f9f9; padding: 15px; border-radius: 8px; border: 1px solid var(--border); text-align: center; font-weight: bold; font-size: 1.2rem;">${duration} минут</div>
                        </div>
                        <div>
                            <h3 style="color: var(--primary); margin-bottom: 10px;">Материалы:</h3>
                            <div style="white-space: pre-line; background-color: #f9f9f9; padding: 15px; border-radius: 8px; border: 1px solid var(--border);">${materials}</div>
                        </div>
                    </div>
                    <div>
                        <h3 style="color: var(--primary); margin-bottom: 10px;">Задания во время урока:</h3>
                        <div style="white-space: pre-line; background-color: #f9f9f9; padding: 20px; border-radius: 8px; border: 1px solid var(--border);">${tasks}</div>
                    </div>
                    <div style="margin-top: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 10px;">Домашнее задание:</h3>
                        <div style="white-space: pre-line; background-color: #f9f9f9; padding: 20px; border-radius: 8px; border: 1px solid var(--border);">${homework}</div>
                    </div>
                    <hr style="margin: 30px 0; border: none; border-top: 2px dashed var(--border);">
                    <div style="text-align: center; color: var(--text-light); font-size: 0.9rem;">
                        <i class="fas fa-calendar-alt"></i> План урока создан в "Учительском помощнике"
                    </div>
                </div>
            `;
            
            document.getElementById('planOutput').innerHTML = output;
        });
        
        // Экспорт в PDF
        document.getElementById('exportPdfBtn').addEventListener('click', function() {
            const planOutput = document.getElementById('planOutput');
            
            if (!planOutput.innerHTML.includes('План урока')) {
                const message = document.createElement('div');
                message.className = 'message warning';
                message.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Сначала создайте план урока с помощью кнопки "Предварительный просмотр".';
                document.getElementById('planOutput').prepend(message);
                message.scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }
            
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.classList.add('show');
            
            html2canvas(planOutput, {
                scale: 2,
                useCORS: true,
                logging: false,
                backgroundColor: '#ffffff'
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const imgWidth = 190;
                const pageHeight = pdf.internal.pageSize.height;
                const imgHeight = canvas.height * imgWidth / canvas.width;
                let heightLeft = imgHeight;
                let position = 10;
                
                pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                heightLeft -= pageHeight - 30;
                
                while (heightLeft >= 0) {
                    position = heightLeft - imgHeight + 20;
                    pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight - 30;
                }
                
                pdf.save('план_урока.pdf');
                loadingOverlay.classList.remove('show');
                
                const message = document.createElement('div');
                message.className = 'message success';
                message.innerHTML = '<i class="fas fa-check-circle"></i> PDF документ успешно создан и сохранен!';
                document.getElementById('planOutput').prepend(message);
                
                setTimeout(() => {
                    message.remove();
                }, 5000);
            }).catch(error => {
                console.error('Ошибка создания PDF:', error);
                loadingOverlay.classList.remove('show');
                
                const message = document.createElement('div');
                message.className = 'message warning';
                message.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Не удалось создать PDF. Пожалуйста, попробуйте еще раз.';
                document.getElementById('planOutput').prepend(message);
            });
        });
        
        // Экспорт в Word
        document.getElementById('exportWordBtn').addEventListener('click', function() {
            const planOutput = document.getElementById('planOutput');
            
            if (!planOutput.innerHTML.includes('План урока')) {
                const message = document.createElement('div');
                message.className = 'message warning';
                message.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Сначала создайте план урока с помощью кнопки "Предварительный просмотр".';
                document.getElementById('planOutput').prepend(message);
                message.scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }
            
            const content = planOutput.innerHTML;
            const header = `<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>План урока</title><style>body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }</style></head><body>`;
            const footer = "</body></html>";
            const sourceHTML = header + content + footer;
            
            const blob = new Blob(['\ufeff', sourceHTML], { type: 'application/msword' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'план_урока.doc';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            const message = document.createElement('div');
                message.className = 'message success';
                message.innerHTML = '<i class="fas fa-check-circle"></i> Документ Word успешно создан и сохранен!';
                document.getElementById('planOutput').prepend(message);
            
            setTimeout(() => {
                message.remove();
            }, 5000);
        });
        
        // Генератор заданий
        document.getElementById('generateTasksBtn').addEventListener('click', function() {
            const subject = document.getElementById('subject').value;
            const grade = parseInt(document.getElementById('grade').value);
            const taskType = document.getElementById('taskType').value;
            const taskCount = parseInt(document.getElementById('taskCount').value);
            const difficulty = document.getElementById('difficulty').value;
            
            const subjectNames = {
                'math': 'Математика',
                'russian': 'Русский язык',
                'literature': 'Литература',
                'history': 'История',
                'biology': 'Биология',
                'physics': 'Физика',
                'english': 'Английский язык',
                'geography': 'География',
                'chemistry': 'Химия'
            };
            
            const tasksDatabase = {
                'math': {
                    '1': [
                        'Реши пример: 2 + 3 = ?',
                        'Сосчитай, сколько яблок на картинке (изображение 5 яблок)',
                        'Напиши цифры от 1 до 5 по порядку',
                        'Сравни числа: 4 ⬜ 6 (вставь >, < или =)',
                        'Реши задачу: У Маши 3 куклы, а у Кати 2 куклы. Сколько всего кукол у девочек?',
                        'Найди лишнюю фигуру: круг, квадрат, треугольник, яблоко',
                        'Раздели 6 конфет поровну между двумя детьми',
                        'Какое число стоит между 7 и 9?',
                        'Реши пример: 5 - 2 = ?',
                        'Нарисуй столько кружков, сколько показывает цифра 4'
                    ],
                    '2': [
                        'Реши пример: 7 + 8 = ?',
                        'Вычисли: 15 - 6 = ?',
                        'Реши задачу: В саду росло 9 яблонь, 3 яблони спилили. Сколько яблонь осталось?',
                        'Запиши числа от 10 до 20 по порядку',
                        'Сравни: 12 + 3 ⬜ 10 + 5',
                        'Реши пример: 4 × 3 = ?',
                        'Раздели 12 на 3 равные части',
                        'Назови предыдущее и следующее число для 14',
                        'Вычисли периметр квадрата со стороной 3 см',
                        'Реши цепочку примеров: 5 + 3 - 2 + 4 = ?'
                    ],
                    '3': [
                        'Реши пример: 24 + 37 = ?',
                        'Вычисли: 56 - 29 = ?',
                        'Реши задачу: Купили 4 ручки по 8 рублей каждая. Сколько заплатили за все ручки?',
                        'Найди неизвестное число: □ + 15 = 32',
                        'Сравни дроби: 1/2 ⬜ 1/4',
                        'Реши пример: 48 ÷ 6 = ?',
                        'Вырази в сантиметрах: 3 дм 5 см',
                        'Найди площадь прямоугольника со сторонами 4 см и 7 см',
                        'Реши уравнение: x + 12 = 30',
                        'Вычисли: 7 × 8 + 15 = ?'
                    ],
                    '4': [
                        'Реши пример: 235 + 148 = ?',
                        'Вычисли: 400 - 167 = ?',
                        'Реши задачу: Автобус ехал 3 часа со скоростью 60 км/ч. Какое расстояние он проехал?',
                        'Вырази в метрах: 2 км 350 м',
                        'Сравни дроби: 3/5 ⬜ 4/7',
                        'Найди НОК чисел 12 и 18',
                        'Реши уравнение: 2x = 24',
                        'Вычисли площадь квадрата со стороной 9 см',
                        'Переведи смешанное число в неправильную дробь: 3 2/5',
                        'Реши задачу на движение: Два велосипедиста выехали навстречу друг другу из точек А и Б...'
                    ],
                    '5': [
                        'Реши уравнение: x + 15 = 32',
                        'Вычисли: 3/4 + 2/5 = ?',
                        'Реши задачу: Турист прошел 12 км, что составило 3/5 всего пути. Сколько километров составляет весь путь?',
                        'Найди НОД чисел 36 и 48',
                        'Вырази в килограммах: 3 т 250 кг',
                        'Реши пропорцию: 5/8 = x/24',
                        'Вычисли площадь прямоугольника со сторонами 7.5 см и 4 см',
                        'Переведи десятичную дробь в обыкновенную: 0.75',
                        'Реши задачу на проценты: Найди 15% от числа 200',
                        'Вычисли: (12 + 8) × 3 - 15 ÷ 3'
                    ],
                    '6': [
                        'Реши уравнение: 2x - 7 = 15',
                        'Вычисли: -5 + 12 - (-3) = ?',
                        'Реши задачу: Два автомобиля выехали одновременно из двух городов навстречу друг другу...',
                        'Найди координаты точки пересечения графиков функций y=2x+1 и y=-x+4',
                        'Вычисли модуль: | -8 | + | 5 | = ?',
                        'Реши неравенство: 3x - 5 < 10',
                        'Построй график линейной функции y = 2x - 3',
                        'Упрости выражение: 3a - 2b + 4a - 5b',
                        'Реши систему уравнений: {x + y = 10, x - y = 2}',
                        'Найди объем прямоугольного параллелепипеда со сторонами 4 см, 5 см и 6 см'
                    ],
                    '7': [
                        'Реши квадратное уравнение: x² - 5x + 6 = 0',
                        'Упрости выражение: (a - 3)(a + 4)',
                        'Реши задачу с помощью системы уравнений: Два числа в сумме дают 30, а их разность равна 6',
                        'Разложи на множители: 3x² - 12x',
                        'Вычисли: √64 + ∛27 = ?',
                        'Докажи, что сумма углов треугольника равна 180°',
                        'Реши неравенство: (x-3)/(x+2) > 0',
                        'Найди синус угла 30°',
                        'Вычисли площадь треугольника со сторонами 5, 12, 13',
                        'Докажи теорему Пифагора'
                    ],
                    '8': [
                        'Реши квадратное уравнение: 2x² - 7x + 3 = 0',
                        'Упрости выражение: (2a - 3b)²',
                        'Реши систему неравенств: {x+3 > 0, 2x-1 < 5}',
                        'Найди область определения функции y = √(x-3)',
                        'Докажи признаки подобия треугольников',
                        'Реши задачу на движение по реке: Лодка плывет по течению...',
                        'Найди производную функции f(x) = x³ - 2x² + 5',
                        'Вычисли: log₂ 16 + log₃ 9',
                        'Реши тригонометрическое уравнение: sin x = 1/2',
                        'Докажи теорему Виета'
                    ],
                    '9': [
                        'Реши уравнение: 3x² - 12x + 9 = 0',
                        'Построй график функции y = x² - 4x + 3',
                        'Реши систему уравнений с тремя переменными',
                        'Найди предел функции при x→∞',
                        'Докажи свойства логарифмов',
                        'Реши неравенство с модулем: |x-3| < 5',
                        'Вычисли производную сложной функции',
                        'Исследуй функцию на монотонность и экстремумы',
                        'Реши показательное уравнение: 2^x = 32',
                        'Докажи теорему синусов'
                    ],
                    '10': [
                        'Реши тригонометрическое уравнение: sin²x + cos²x = 1',
                        'Найди производную функции f(x) = ln(x²+1)',
                        'Реши систему линейных уравнений матричным методом',
                        'Вычисли определенный интеграл',
                        'Докажи свойства степенных функций',
                        'Исследуй функцию на выпуклость и точки перегиба',
                        'Реши логарифмическое уравнение',
                        'Найди площадь фигуры, ограниченной линиями',
                        'Реши дифференциальное уравнение',
                        'Докажи теорему о среднем значении'
                    ],
                    '11': [
                        'Реши уравнение с параметром',
                        'Найди предел последовательности',
                        'Реши задачу на вероятность',
                        'Вычисли объем тела вращения',
                        'Докажи свойства комбинаторики',
                        'Реши систему неравенств с параметрами',
                        'Найди первообразную функции',
                        'Исследуй функцию методами математического анализа',
                        'Реши задачу на теорию чисел',
                        'Докажи теорему о производной обратной функции'
                    ]
                },
                'russian': {
                    '1': [
                        'Напиши буквы: А, О, У, И, Ы',
                        'Раздели слова на слоги: ма-ма, па-па, до-мик',
                        'Составь слово из слогов: со-ба-ка, кош-ка, кни-га',
                        'Подчеркни гласные буквы в слове "малина"',
                        'Напиши свое имя красиво',
                        'Составь предложение из слов: дети, играют, во, дворе',
                        'Напиши 5 слов, которые начинаются на букву "М"',
                        'Раздели для переноса: мальчик, девочка, тетрадь',
                        'Найди лишнее слово: стол, стул, окно, диван',
                        'Составь рассказ из 3 предложений о своей семье'
                    ],
                    '2': [
                        'Вставь пропущенные буквы: м..л..ко, к..рова, с..бака',
                        'Подчеркни главные члены предложения: "Дети играют во дворе."',
                        'Раздели текст на предложения',
                        'Запиши слова в алфавитном порядке: яблоко, груша, слива, абрикос',
                        'Определи род имен существительных: стол, книга, окно',
                        'Подбери антонимы к словам: день, большой, высокий',
                        'Составь диалог из 4 реплик между продавцом и покупателем',
                        'Напиши письмо другу о своих каникулах',
                        'Определи количество звуков и букв в словах: ёж, яблоко, семья',
                        'Исправь ошибки в тексте'
                    ],
                    '3': [
                        'Выполни морфемный разбор слова "подснежник"',
                        'Определи часть речи каждого слова в предложении',
                        'Составь предложение с однородными членами',
                        'Образуй однокоренные слова от слова "лес"',
                        'Выполни синтаксический разбор предложения',
                        'Определи время и лицо глаголов: бегу, читал, напишет',
                        'Найди и исправь орфографические ошибки в тексте',
                        'Составь план текста "Зимние забавы"',
                        'Определи тип текста (описание, повествование, рассуждение)',
                        'Напиши изложение по прослушанному тексту'
                    ],
                    '4': [
                        'Определи падеж имен существительных в предложении',
                        'Образуй степени сравнения прилагательных: красивый, умный',
                        'Разбери глагол как часть речи: "читает"',
                        'Определи вид глагола (совершенный/несовершенный): прочитать, читать',
                        'Найди в тексте все местоимения и определи их разряд',
                        'Составь сложное предложение с союзами и, а, но',
                        'Выполни фонетический разбор слова "семья"',
                        'Определи спряжение глагола: говорить, смотреть',
                        'Найди в тексте средства художественной выразительности',
                        'Напиши сочинение на тему "Мое любимое время года"'
                    ],
                    '5': [
                        'Разбери слово по составу: перестройка',
                        'Определи тип предложения по цели высказывания',
                        'Найди грамматическую основу в сложном предложении',
                        'Образуй все возможные формы слова "бежать"',
                        'Определи стиль текста (научный, художественный, разговорный)',
                        'Найди вводные слова в предложении',
                        'Составь предложения с прямой речью',
                        'Определи тип подчинительной связи в словосочетании',
                        'Найди обособленные члены предложения',
                        'Напиши сочинение  рассуждение на заданную тему'
                    ],
                    '6': [
                        'Выполни полный морфологический разбор слова',
                        'Определи тип сложного предложения',
                        'Найди причастные и деепричастные обороты',
                        'Объясни правописание Н и НН в прилагательных',
                        'Определи значение фразеологизма',
                        'Составь предложения с разными видами обстоятельств',
                        'Найди риторические фигуры в тексте',
                        'Определи способ словообразования',
                        'Проанализируйте синтаксическую роль инфинитива',
                        'Напиши рецензию на прочитанное произведение'
                    ],
                    '7': [
                        'Проведи синтаксический анализ сложного предложения',
                        'Определи стилистические особенности текста',
                        'Найди средства выразительности в поэтическом тексте',
                        'Объясни употребление знаков препинания в сложных конструкциях',
                        'Определи языковые особенности научного стиля',
                        'Проанализируйте композицию текста',
                        'Найди примеры различных тропов',
                        'Определи авторскую позицию в тексте',
                        'Сравните языковые средства в двух текстах',
                        'Напиши эссе на философскую тему'
                    ],
                    '8': [
                        'Проведи комплексный анализ текста',
                        'Определи идейно-тематическое содержание произведения',
                        'Найди интертекстуальные связи',
                        'Проанализируйте образную система произведения',
                        'Определи жанровые особенности текста',
                        'Найди историко-культурный контекст',
                        'Проанализируйте языковые средства создания характера',
                        'Определи композиционные приемы',
                        'Сравните разные редакции произведения',
                        'Напиши литературоведческий анализ'
                    ],
                    '9': [
                        'Проведи лингвистический анализ текста',
                        'Определи языковую картину мира автора',
                        'Найди особенности идиостиля писателя',
                        'Проанализируйте эволюцию языковых норм',
                        'Определи диалектные особенности в тексте',
                        'Найди примеры языковой игры',
                        'Проанализируйте социолингвистические аспекты',
                        'Определи прагматические особенности текста',
                        'Сравните языковые средства разных периодов',
                        'Напиши исследовательскую работу'
                    ],
                    '10': [
                        'Проведи филологический анализ текста',
                        'Определи методологию исследования',
                        'Найди межтекстовые связи',
                        'Проанализируйте поэтику произведения',
                        'Определи культурно-исторический контекст',
                        'Найди реминисценции и аллюзии',
                        'Проанализируйте нарративную структуру',
                        'Определи семиотические аспекты текста',
                        'Сравните интерпретации произведения',
                        'Напиши научную статью'
                    ],
                    '11': [
                        'Проведи комплексный филологический анализ',
                        'Определи теоретико-методологические основы',
                        'Найди философские аспекты текста',
                        'Проанализируйте рецепцию произведения',
                        'Определи место текста в литературном процессе',
                        'Найди постмодернистские черты',
                        'Проанализируйте интертекстуальность',
                        'Определи дискурсивные особенности',
                        'Сравните национальные литературные традиции',
                        'Напиши дипломную работу'
                    ]
                },
                'physics': {
                    '7': [
                        'Сформулируйте первый закон Ньютона',
                        'Рассчитайте скорость тела, прошедшего 100 м за 20 с',
                        'Объясните явление инерции',
                        'Рассчитайте давление на глубине 10 м в воде',
                        'Объясните принцип действия рычага',
                        'Рассчитайте работу силы 50 Н при перемещении на 2 м',
                        'Объясните тепловое расширение тел',
                        'Рассчитайте КПД простого механизма',
                        'Объясните явление диффузии',
                        'Рассчитайте мощность двигателя'
                    ],
                    '8': [
                        'Сформулируйте закон Ома для участка цепи',
                        'Рассчитайте сопротивление проводника',
                        'Объясните явление электромагнитной индукции',
                        'Рассчитайте количество теплоты',
                        'Объясните принцип действия трансформатора',
                        'Рассчитайте силу тока в цепи',
                        'Объясните тепловое действие тока',
                        'Рассчитайте работу электрического тока',
                        'Объясните магнитное поле проводника',
                        'Рассчитайте электроемкость конденсатора'
                    ],
                    '9': [
                        'Сформулируйте законы отражения света',
                        'Рассчитайте фокусное расстояние линзы',
                        'Объясните явление интерференции',
                        'Рассчитайте период колебаний маятника',
                        'Объясните принцип действия микроскопа',
                        'Рассчитайте скорость звука в воздухе',
                        'Объясните явление резонанса',
                        'Рассчитайте энергию кванта света',
                        'Объясните фотоэффект',
                        'Рассчитайте длину волны'
                    ],
                    '10': [
                        'Сформулируйте уравнение состояния идеального газа',
                        'Рассчитайте внутреннюю энергию газа',
                        'Объясните первый закон термодинамики',
                        'Рассчитайте КПД тепловой машины',
                        'Объясните принцип действия холодильника',
                        'Рассчитайте количество вещества',
                        'Объясните явление поверхностного натяжения',
                        'Рассчитайте вязкость жидкости',
                        'Объясните теплопроводность',
                        'Рассчитайте удельную теплоту'
                    ],
                    '11': [
                        'Сформулируйте постулаты специальной теории относительности',
                        'Рассчитайте релятивистскую массу',
                        'Объясните явление фотоэффекта',
                        'Рассчитайте энергию связи ядра',
                        'Объясните принцип действия ядерного реактора',
                        'Рассчитайте период полураспада',
                        'Объясните корпускулярно-волновой дуализм',
                        'Рассчитайте дефект массы',
                        'Объясните принцип неопределенности',
                        'Рассчитайте красное смещение'
                    ]
                }
            };
            
            // Если для предмета нет заданий для данного класса, используем общие
            if (!tasksDatabase[subject] || !tasksDatabase[subject][grade]) {
                const generalTasks = {
                    'english': [
                        `Составьте 5 предложений на английском языке для ${grade} класса`,
                        `Переведите текст с русского на английский`,
                        `Составьте диалог на тему "Знакомство"`,
                        `Напишите эссе на заданную тему`,
                        `Выполните упражнения на грамматику`,
                        `Составьте тест из 10 вопросов`,
                        `Подготовьте материал для аудирования`,
                        `Напишите письмо другу на английском`,
                        `Составьте кроссворд по теме урока`,
                        `Подготовьте презентацию на английском`
                    ],
                    'biology': [
                        `Опишите строение клетки для ${grade} класса`,
                        `Составьте схему пищевой цепи`,
                        `Объясните процесс фотосинтеза`,
                        `Опишите системы органов человека`,
                        `Составьте классификацию растений`,
                        `Объясните механизм наследственности`,
                        `Опишите этапы эволюции`,
                        `Составьте таблицу экосистем`,
                        `Объясните круговорот веществ`,
                        `Опишите методы исследования в биологии`
                    ],
                    'history': [
                        `Составьте хронологию событий для ${grade} класса`,
                        `Опишите причины и следствия исторического события`,
                        `Проанализируйте документ эпохи`,
                        `Сравните два исторических периода`,
                        `Опишите социальную структуру общества`,
                        `Составьте таблицу правителей`,
                        `Объясните экономические процессы`,
                        `Опишите культурные достижения`,
                        `Проанализируйте историческую карту`,
                        `Напишите эссе на историческую тему`
                    ],
                    'geography': [
                        `Опишите географическое положение для ${grade} класса`,
                        `Составьте характеристику климатического пояса`,
                        `Объясните образование рельефа`,
                        `Опишите природную зону`,
                        `Составьте экономическую характеристику региона`,
                        `Объясните демографические процессы`,
                        `Опишите ресурсный потенциал`,
                        `Составьте картосхему`,
                        `Объясните экологические проблемы`,
                        `Напишите отчет о географическом исследовании`
                    ],
                    'chemistry': [
                        `Составьте уравнение реакции для ${grade} класса`,
                        `Опишите свойства химического элемента`,
                        `Объясните типы химических связей`,
                        `Составьте формулу соединения`,
                        `Опишите методы получения веществ`,
                        `Объясните закономерности Периодической системы`,
                        `Опишите химические процессы в природе`,
                        `Составьте схему производства`,
                        `Объясните механизм реакции`,
                        `Напишите отчет о химическом эксперименте`
                    ],
                    'literature': [
                        `Проанализируйте литературное произведение для ${grade} класса`,
                        `Опишите образ главного героя`,
                        `Объясните идею произведения`,
                        `Составьте план анализа текста`,
                        `Опишите художественные средства`,
                        `Сравните двух персонажей`,
                        `Объясните композицию произведения`,
                        `Опишите исторический контекст`,
                        `Составьте цитатную характеристику`,
                        `Напишите сочинение на литературную тему`
                    ]
                };
                
                if (generalTasks[subject]) {
                    tasksDatabase[subject] = tasksDatabase[subject] || {};
                    tasksDatabase[subject][grade] = generalTasks[subject];
                } else {
                    tasksDatabase[subject] = tasksDatabase[subject] || {};
                    tasksDatabase[subject][grade] = [
                        `Составьте 5 вопросов по теме "${subjectNames[subject]}" для ${grade} класса`,
                        `Подготовьте краткий конспект урока`,
                        `Разработайте практическое задание по теме`,
                        `Составьте тест из 10 вопросов`,
                        `Подготовьте материал для самостоятельной работы`,
                        `Напишите методические рекомендации по изучению темы`,
                        `Разработайте творческое задание`,
                        `Составьте план урока по конкретной теме`,
                        `Подготовьте вопросы для дискуссии`,
                        `Создайте кроссворд по теме урока`
                    ];
                }
            }
            
            let selectedTasks = tasksDatabase[subject][grade];
            
            // Генерация случайных заданий
            let output = `<h3 style="color: var(--primary); margin-bottom: 15px;">Задания по предмету: ${subjectNames[subject]} (${grade} класс)</h3>`;
            output += `<p><strong>Тип заданий:</strong> ${document.getElementById('taskType').options[document.getElementById('taskType').selectedIndex].text}</p>`;
            output += `<p><strong>Сложность:</strong> ${document.getElementById('difficulty').options[document.getElementById('difficulty').selectedIndex].text}</p>`;
            output += `<p><strong>Количество заданий:</strong> ${taskCount}</p><hr style="margin: 20px 0; border: none; border-top: 1px solid var(--border);">`;
            
            output += '<ol style="padding-left: 20px;">';
            
            const usedIndices = new Set();
            for (let i = 0; i < taskCount; i++) {
                let randomIndex;
                
                if (selectedTasks.length <= taskCount) {
                    randomIndex = i % selectedTasks.length;
                } else {
                    do {
                        randomIndex = Math.floor(Math.random() * selectedTasks.length);
                    } while (usedIndices.has(randomIndex));
                    usedIndices.add(randomIndex);
                }
                
                output += `<li style="margin-bottom: 15px;">${selectedTasks[randomIndex]}</li>`;
            }
            
            output += '</ol>';
            output += '<hr style="margin: 25px 0; border: none; border-top: 1px solid var(--border);">';
            output += '<p style="font-style: italic; color: var(--text-light);"><i class="fas fa-info-circle"></i> Задания сгенерированы автоматически и соответствуют программе для выбранного класса. Вы можете редактировать их по своему усмотрению.</p>';
            
            document.getElementById('taskOutput').innerHTML = output;
        });
        
        // Копирование заданий
        document.getElementById('copyTasksBtn').addEventListener('click', function() {
            const taskOutput = document.getElementById('taskOutput');
            const range = document.createRange();
            range.selectNode(taskOutput);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            
            try {
                document.execCommand('copy');
                const message = document.createElement('div');
                message.className = 'message success';
                message.innerHTML = '<i class="fas fa-check-circle"></i> Задания скопированы в буфер обмена!';
                document.getElementById('taskOutput').prepend(message);
                
                message.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                setTimeout(() => {
                    message.remove();
                }, 3000);
            } catch (err) {
                const message = document.createElement('div');
                message.className = 'message warning';
                message.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Не удалось скопировать задания';
                document.getElementById('taskOutput').prepend(message);
                
                message.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            
            window.getSelection().removeAllRanges();
        });
        
        // Печать заданий
        document.getElementById('printTasksBtn').addEventListener('click', function() {
            const printContent = document.getElementById('taskOutput').innerHTML;
            const originalContent = document.body.innerHTML;
            
            document.body.innerHTML = `
                <div style="max-width: 800px; margin: 0 auto; padding: 30px;">
                    <h1 style="color: #2c5aa0; text-align: center;">Задания для учеников</h1>
                    <div>${printContent}</div>
                    <p style="margin-top: 30px; font-style: italic; text-align: center;">
                        Сгенерировано на сайте "Учительский помощник"
                    </p>
                </div>
            `;
            
            window.print();
            document.body.innerHTML = originalContent;
            location.reload();
        });
        
        // Текстовый редактор
        const wordEditor = document.getElementById('wordEditor');
        const boldBtn = document.getElementById('boldBtn');
        const italicBtn = document.getElementById('italicBtn');
        const underlineBtn = document.getElementById('underlineBtn');
        const alignLeftBtn = document.getElementById('alignLeftBtn');
        const alignCenterBtn = document.getElementById('alignCenterBtn');
        const alignRightBtn = document.getElementById('alignRightBtn');
        const justifyBtn = document.getElementById('justifyBtn');
        const bulletListBtn = document.getElementById('bulletListBtn');
        const numberListBtn = document.getElementById('numberListBtn');
        const indentBtn = document.getElementById('indentBtn');
        const outdentBtn = document.getElementById('outdentBtn');
        const clearFormatBtn = document.getElementById('clearFormatBtn');
        const undoBtn = document.getElementById('undoBtn');
        const redoBtn = document.getElementById('redoBtn');
        const fontSizeSelect = document.getElementById('fontSize');
        const fontFamilySelect = document.getElementById('fontFamily');
        const textRotate = document.getElementById('textRotate');
        const rotateValue = document.getElementById('rotateValue');
        const charCount = document.getElementById('charCount');
        const colorBtns = document.querySelectorAll('.color-btn');
        
        let currentColor = '#000000';
        let editorHistory = [];
        let historyIndex = -1;
        
        function saveEditorState() {
            const html = wordEditor.innerHTML;
            historyIndex++;
            editorHistory = editorHistory.slice(0, historyIndex);
            editorHistory.push(html);
            
            if (editorHistory.length > 50) {
                editorHistory.shift();
                historyIndex--;
            }
            
            updateUndoRedoButtons();
        }
        
        function updateUndoRedoButtons() {
            undoBtn.disabled = historyIndex <= 0;
            redoBtn.disabled = historyIndex >= editorHistory.length - 1;
        }
        
        function undo() {
            if (historyIndex > 0) {
                historyIndex--;
                wordEditor.innerHTML = editorHistory[historyIndex];
                updateUndoRedoButtons();
                updateCharCount();
            }
        }
        
        function redo() {
            if (historyIndex < editorHistory.length - 1) {
                historyIndex++;
                wordEditor.innerHTML = editorHistory[historyIndex];
                updateUndoRedoButtons();
                updateCharCount();
            }
        }
        
        function formatText(command, value = null) {
            document.execCommand(command, false, value);
            wordEditor.focus();
            saveEditorState();
            updateCharCount();
        }
        
        function applyColorToSelection(color) {
            formatText('foreColor', color);
            currentColor = color;
            updateActiveColorButton();
        }
        
        function updateActiveColorButton() {
            colorBtns.forEach(btn => {
                btn.classList.remove('active');
            });
            
            const activeColorBtn = document.querySelector(`.color-btn[data-color="${currentColor}"]`);
            if (activeColorBtn) {
                activeColorBtn.classList.add('active');
            }
        }
        
        function updateAlignmentButtons() {
            [alignLeftBtn, alignCenterBtn, alignRightBtn, justifyBtn].forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (document.queryCommandState('justifyLeft')) alignLeftBtn.classList.add('active');
            else if (document.queryCommandState('justifyCenter')) alignCenterBtn.classList.add('active');
            else if (document.queryCommandState('justifyRight')) alignRightBtn.classList.add('active');
            else if (document.queryCommandState('justifyFull')) justifyBtn.classList.add('active');
        }
        
        function updateFormatButtons() {
            boldBtn.classList.toggle('active', document.queryCommandState('bold'));
            italicBtn.classList.toggle('active', document.queryCommandState('italic'));
            underlineBtn.classList.toggle('active', document.queryCommandState('underline'));
            updateAlignmentButtons();
        }
        
        // Обработчики кнопок форматирования
        boldBtn.addEventListener('click', () => formatText('bold'));
        italicBtn.addEventListener('click', () => formatText('italic'));
        underlineBtn.addEventListener('click', () => formatText('underline'));
        
        alignLeftBtn.addEventListener('click', () => formatText('justifyLeft'));
        alignCenterBtn.addEventListener('click', () => formatText('justifyCenter'));
        alignRightBtn.addEventListener('click', () => formatText('justifyRight'));
        justifyBtn.addEventListener('click', () => formatText('justifyFull'));
        
        bulletListBtn.addEventListener('click', () => formatText('insertUnorderedList'));
        numberListBtn.addEventListener('click', () => formatText('insertOrderedList'));
        indentBtn.addEventListener('click', () => formatText('indent'));
        outdentBtn.addEventListener('click', () => formatText('outdent'));
        clearFormatBtn.addEventListener('click', () => {
            formatText('removeFormat');
            formatText('formatBlock', '<div>');
        });
        
        undoBtn.addEventListener('click', undo);
        redoBtn.addEventListener('click', redo);
        
        fontSizeSelect.addEventListener('change', function() {
            formatText('fontSize', this.value);
        });
        
        fontFamilySelect.addEventListener('change', function() {
            formatText('fontName', this.value);
        });
        
        colorBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const color = this.getAttribute('data-color');
                applyColorToSelection(color);
            });
        });
        
        textRotate.addEventListener('input', function() {
            const angle = this.value;
            rotateValue.textContent = `${angle}°`;
            
            const selection = window.getSelection();
            if (selection.rangeCount > 0 && !selection.isCollapsed) {
                const range = selection.getRangeAt(0);
                const selectedText = range.toString();
                
                if (selectedText.length > 0) {
                    const span = document.createElement('span');
                    span.style.transform = `rotate(${angle}deg)`;
                    span.style.display = 'inline-block';
                    span.style.transformOrigin = 'center';
                    span.innerHTML = selectedText;
                    
                    range.deleteContents();
                    range.insertNode(span);
                    
                    const newRange = document.createRange();
                    newRange.selectNodeContents(span);
                    selection.removeAllRanges();
                    selection.addRange(newRange);
                    
                    saveEditorState();
                }
            }
        });
        
        function updateCharCount() {
            const text = wordEditor.innerText || wordEditor.textContent;
            charCount.textContent = `Символов: ${text.length}`;
        }
        
        wordEditor.addEventListener('input', function() {
            updateCharCount();
            localStorage.setItem('teacherDoc', this.innerHTML);
        });
        
        wordEditor.addEventListener('mouseup', updateFormatButtons);
        wordEditor.addEventListener('keyup', updateFormatButtons);
        
        // Загрузка сохраненного документа при загрузке страницы
        window.addEventListener('load', function() {
            const savedDoc = localStorage.getItem('teacherDoc');
            if (savedDoc) {
                wordEditor.innerHTML = savedDoc;
            }
            
            saveEditorState();
            updateCharCount();
            updateActiveColorButton();
            updateFormatButtons();
            
            // Автоматически генерируем задания при загрузке
            document.getElementById('generateTasksBtn').click();
        });
        
        // Сохранение документа
        document.getElementById('saveDocBtn').addEventListener('click', function() {
            const docContent = wordEditor.innerHTML;
            const blob = new Blob([docContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'документ_учителя.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            const message = document.createElement('div');
            message.className = 'message success';
            message.innerHTML = '<i class="fas fa-check-circle"></i> Документ сохранен как "документ_учителя.html"';
            document.querySelector('.editor-footer').prepend(message);
            
            setTimeout(() => {
                message.remove();
            }, 3000);
        });
        
        // Экспорт в Word
        document.getElementById('exportDocBtn').addEventListener('click', function() {
            const content = wordEditor.innerHTML;
            const header = `<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Документ учителя</title><style>body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }</style></head><body>`;
            const footer = "</body></html>";
            const sourceHTML = header + content + footer;
            
            const blob = new Blob(['\ufeff', sourceHTML], { type: 'application/msword' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'документ_учителя.doc';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            const message = document.createElement('div');
            message.className = 'message success';
            message.innerHTML = '<i class="fas fa-check-circle"></i> Документ экспортирован в формате Word!';
            document.querySelector('.editor-footer').prepend(message);
            
            setTimeout(() => {
                message.remove();
            }, 3000);
        });
        
        // Горячие клавиши для редактора
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'z') {
                e.preventDefault();
                undo();
            }
            
            if ((e.ctrlKey && e.key === 'y') || (e.ctrlKey && e.shiftKey && e.key === 'Z')) {
                e.preventDefault();
                redo();
            }
            
            if (e.ctrlKey && e.key === 'b') {
                e.preventDefault();
                formatText('bold');
            }
            
            if (e.ctrlKey && e.key === 'i') {
                e.preventDefault();
                formatText('italic');
            }
            
            if (e.ctrlKey && e.key === 'u') {
                e.preventDefault();
                formatText('underline');
            }
        });
        
        // Плавная прокрутка к якорям
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                document.querySelectorAll('nav a').forEach(link => {
                    link.classList.remove('active');
                });
                
                this.classList.add('active');
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                    
                    // Если это переход в раздел браузера, включаем полноэкранный режим
                    if (targetId === '#browser') {
                        setTimeout(() => {
                            activateFullscreenBrowser();
                        }, 500);
                    }
                }
            });
        });
        
        // БРАУЗЕР - инициализация с проверкой элементов
        let browserContainer, browserFrame, browserLoading, browserError, errorText;
        let browserUrl, refreshBrowser, browserBack, browserForward, browserHome, browserGo;
        let browserClose, browserMinimize, browserMaximize, fullscreenBtn, fullscreenExitBtn;
        let openInNewTab, reloadPage;
        
        let isFullscreen = false;
        let currentUrl = 'https://www.google.com';
        let loadTimer = null;
        
        // Инициализация элементов браузера
        function initBrowserElements() {
            try {
                browserContainer = document.getElementById('browserContainer');
                browserFrame = document.getElementById('browserFrame');
                browserLoading = document.getElementById('browserLoading');
                browserError = document.getElementById('browserError');
                errorText = document.getElementById('errorText');
                browserUrl = document.getElementById('browserUrl');
                refreshBrowser = document.getElementById('refreshBrowser');
                browserBack = document.getElementById('browserBack');
                browserForward = document.getElementById('browserForward');
                browserHome = document.getElementById('browserHome');
                browserGo = document.getElementById('browserGo');
                browserClose = document.getElementById('browserClose');
                browserMinimize = document.getElementById('browserMinimize');
                browserMaximize = document.getElementById('browserMaximize');
                fullscreenBtn = document.getElementById('fullscreenBtn');
                fullscreenExitBtn = document.getElementById('fullscreenExitBtn');
                openInNewTab = document.getElementById('openInNewTab');
                reloadPage = document.getElementById('reloadPage');
                
                // Проверяем наличие критических элементов
                if (!browserFrame || !browserLoading || !browserError) {
                    console.warn('Некоторые элементы браузера не найдены');
                    return false;
                }
                return true;
            } catch(e) {
                console.error('Ошибка инициализации элементов браузера:', e);
                return false;
            }
        }
        
        // Функция активации полноэкранного режима браузера
        function activateFullscreenBrowser() {
            if (!isFullscreen && browserContainer && fullscreenExitBtn) {
                browserContainer.classList.add('fullscreen-mode');
                fullscreenExitBtn.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                isFullscreen = true;
                
                // Фокусируемся на iframe
                setTimeout(() => {
                    try {
                        if (browserFrame && browserFrame.contentWindow) {
                            browserFrame.contentWindow.focus();
                        }
                    } catch (e) {
                        // Игнорируем ошибки кросс-доменного доступа
                    }
                }, 100);
            }
        }
        
        // Функция деактивации полноэкранного режима
        function deactivateFullscreenBrowser() {
            if (isFullscreen && browserContainer && fullscreenExitBtn) {
                browserContainer.classList.remove('fullscreen-mode');
                fullscreenExitBtn.style.display = 'none';
                document.body.style.overflow = '';
                isFullscreen = false;
                
                // Прокручиваем к разделу браузера
                const browserSection = document.getElementById('browser');
                if (browserSection) {
                    browserSection.scrollIntoView({ behavior: 'smooth' });
                }
            }
        }
        
        // Инициализация обработчиков событий браузера
        function initBrowserHandlers() {
            if (!initBrowserElements()) {
                console.error('Не удалось инициализировать элементы браузера');
                return;
            }
            
            // Кнопка полного экрана в интерфейсе
            if (fullscreenBtn) {
                fullscreenBtn.addEventListener('click', activateFullscreenBrowser);
            }
            
            // Кнопка выхода из полноэкранного режима
            if (fullscreenExitBtn) {
                fullscreenExitBtn.addEventListener('click', deactivateFullscreenBrowser);
            }
            
            // Выход по клавише ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && isFullscreen) {
                    deactivateFullscreenBrowser();
                }
            });
            
            // Обновление браузера
            if (refreshBrowser) {
                refreshBrowser.addEventListener('click', function() {
                    loadUrl(currentUrl);
                });
            }
            
            // Назад
            if (browserBack) {
                browserBack.addEventListener('click', function() {
                    try {
                        if (browserFrame && browserFrame.contentWindow) {
                            browserFrame.contentWindow.history.back();
                            updateBrowserUrl();
                        }
                    } catch (e) {
                        console.log('Не удалось вернуться назад');
                    }
                });
            }
            
            // Вперед
            if (browserForward) {
                browserForward.addEventListener('click', function() {
                    try {
                        if (browserFrame && browserFrame.contentWindow) {
                            browserFrame.contentWindow.history.forward();
                            updateBrowserUrl();
                        }
                    } catch (e) {
                        console.log('Не удалось перейти вперед');
                    }
                });
            }
            
            // Домашняя страница
            if (browserHome && browserUrl) {
                browserHome.addEventListener('click', function() {
                    loadUrl('https://www.google.com');
                    browserUrl.value = 'https://www.google.com';
                });
            }
            
            // Перейти по URL
            if (browserGo && browserUrl) {
                browserGo.addEventListener('click', function() {
                    loadUrl(browserUrl.value);
                });
            }
            
            // Загрузка по нажатию Enter в адресной строке
            if (browserUrl) {
                browserUrl.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        loadUrl(this.value);
                    }
                });
            }
            
            // Элементы управления браузером (косметические)
            if (browserClose) {
                browserClose.addEventListener('click', function() {
                    if (isFullscreen) {
                        deactivateFullscreenBrowser();
                    }
                });
            }
            
            if (browserMinimize) {
                browserMinimize.addEventListener('click', function() {
                    if (isFullscreen) {
                        deactivateFullscreenBrowser();
                    }
                });
            }
            
            if (browserMaximize) {
                browserMaximize.addEventListener('click', function() {
                    if (!isFullscreen) {
                        activateFullscreenBrowser();
                    } else {
                        deactivateFullscreenBrowser();
                    }
                });
            }
        }
        
        // Прокси-сервисы для обхода X-Frame-Options
        const proxyServices = [
            (url) => `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
            (url) => `https://corsproxy.io/?${encodeURIComponent(url)}`,
            (url) => `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`,
            (url) => url // Прямая загрузка как последний вариант
        ];
        
        let currentProxyIndex = 0;
        
        // Функция получения прокси URL
        function getProxyUrl(url, proxyIndex = 0) {
            if (proxyIndex >= proxyServices.length) {
                return url; // Возвращаем оригинальный URL если все прокси исчерпаны
            }
            return proxyServices[proxyIndex](url);
        }
        
        // Функция загрузки URL
        function loadUrl(url, proxyIndex = 0, retryCount = 0) {
            const maxRetries = 3;
            
            // Очищаем предыдущий таймер
            if (loadTimer) {
                clearTimeout(loadTimer);
                loadTimer = null;
            }
            
            // Очищаем iframe
            try {
                browserFrame.src = 'about:blank';
            } catch(e) {
                console.log('Ошибка очистки iframe:', e);
            }
            
            // Добавляем протокол если отсутствует
            const originalUrl = url;
            if (!url.startsWith('http://') && !url.startsWith('https://') && !url.startsWith('about:')) {
                url = 'https://' + url;
            }
            
            currentUrl = url;
            browserUrl.value = url;
            
            // Показываем индикатор загрузки
            if (browserLoading) {
                browserLoading.style.display = 'flex';
                browserLoading.style.opacity = '1';
            }
            if (browserError) {
                browserError.style.display = 'none';
                browserError.style.opacity = '0';
            }
            if (browserFrame) {
            browserFrame.style.display = 'none';
                browserFrame.style.opacity = '0';
            }
            
            let isLoaded = false;
            const targetUrl = proxyIndex === proxyServices.length - 1 ? url : getProxyUrl(url, proxyIndex);
            
            // Устанавливаем таймер
            loadTimer = setTimeout(function() {
                if (!isLoaded) {
                    if (retryCount < maxRetries && proxyIndex < proxyServices.length - 1) {
                        // Пробуем следующий прокси
                        loadUrl(originalUrl, proxyIndex + 1, retryCount + 1);
                    } else {
                        // Все попытки исчерпаны
                        showError('Не удалось загрузить сайт через прокси. Многие сайты блокируют встраивание в iframe. Используйте кнопку "Открыть в новой вкладке".');
                    }
                }
                if (loadTimer) {
                    clearTimeout(loadTimer);
                    loadTimer = null;
                }
            }, 12000);
            
            // Загружаем сайт
            setTimeout(function() {
                try {
                    if (!browserFrame) {
                        showError('Ошибка: элемент браузера не найден');
                        return;
                    }
                    
                    browserFrame.src = targetUrl;
            
            // Обработка успешной загрузки
            browserFrame.onload = function() {
                        isLoaded = true;
                if (loadTimer) {
                    clearTimeout(loadTimer);
                    loadTimer = null;
                }
                
                        setTimeout(function() {
                            if (browserLoading) {
                                browserLoading.style.opacity = '0';
                                setTimeout(() => {
                                    if (browserLoading) browserLoading.style.display = 'none';
                                }, 300);
                            }
                            if (browserError) {
                                browserError.style.display = 'none';
                            }
                            if (browserFrame) {
                browserFrame.style.display = 'block';
                                browserFrame.style.opacity = '1';
                            }
                updateBrowserUrl();
                        }, 300);
                    };
                    
                    // Быстрая проверка через 2 секунды
                    setTimeout(function() {
                        if (!isLoaded) {
                            try {
                                if (browserFrame && browserFrame.contentWindow) {
                                    isLoaded = true;
                if (loadTimer) {
                    clearTimeout(loadTimer);
                    loadTimer = null;
                }
                                    if (browserLoading) {
                                        browserLoading.style.opacity = '0';
                                        setTimeout(() => {
                                            if (browserLoading) browserLoading.style.display = 'none';
                                        }, 300);
                                    }
                                    if (browserError) {
                                        browserError.style.display = 'none';
                                    }
                                    if (browserFrame) {
                                        browserFrame.style.display = 'block';
                                        browserFrame.style.opacity = '1';
                                    }
                                    updateBrowserUrl();
                                }
                            } catch(e) {
                                // Кросс-доменная ошибка - это нормально, сайт может быть загружен
                                isLoaded = true;
                                if (loadTimer) {
                                    clearTimeout(loadTimer);
                                    loadTimer = null;
                                }
                                if (browserLoading) {
                                    browserLoading.style.opacity = '0';
                                    setTimeout(() => {
                                        if (browserLoading) browserLoading.style.display = 'none';
                                    }, 300);
                                }
                                if (browserError) {
                                    browserError.style.display = 'none';
                                }
                                if (browserFrame) {
                                    browserFrame.style.display = 'block';
                                    browserFrame.style.opacity = '1';
                                }
                            }
                        }
                    }, 2000);
                } catch(e) {
                    console.error('Ошибка загрузки:', e);
                    if (retryCount < maxRetries && proxyIndex < proxyServices.length - 1) {
                        // Пробуем следующий прокси
                        setTimeout(() => {
                            loadUrl(originalUrl, proxyIndex + 1, retryCount + 1);
                        }, 1000);
                    } else {
                        showError('Ошибка при загрузке сайта. Попробуйте открыть в новой вкладке.');
                    }
                }
            }, 300);
        }
        
        // Функция показа ошибки
        function showError(message) {
            if (browserLoading) {
                browserLoading.style.opacity = '0';
                setTimeout(() => {
                    if (browserLoading) browserLoading.style.display = 'none';
                }, 300);
            }
            if (browserError) {
                browserError.style.display = 'flex';
                browserError.style.opacity = '1';
            }
            if (browserFrame) {
                browserFrame.style.display = 'none';
            }
            
            if (errorText) {
                errorText.textContent = message;
            }
            
            // Обновляем обработчики кнопок
            if (openInNewTab) {
                openInNewTab.onclick = function() {
                    window.open(currentUrl, '_blank');
                };
            }
            
            if (reloadPage) {
                reloadPage.onclick = function() {
                    loadUrl(currentUrl);
                };
            }
        }
        
        // Элементы управления браузером уже инициализированы в initBrowserHandlers()
        
        // Обновление URL в адресной строке (уже определено выше)
        
        // Автоматически активируем полноэкранный режим при загрузке страницы, если URL содержит #browser
        window.addEventListener('load', function() {
            try {
                // Инициализируем обработчики браузера
                initBrowserHandlers();
                
                if (window.location.hash === '#browser') {
                    setTimeout(() => {
                        activateFullscreenBrowser();
                    }, 1000);
                }
                
                // Загружаем начальную страницу
                setTimeout(() => {
                    if (browserFrame && browserLoading) {
                        loadUrl('https://www.google.com');
                    }
                }, 800);
            } catch(e) {
                console.error('Ошибка при загрузке браузера:', e);
            }
        });
        
        // Музыкальный плеер
        const musicPlayerBtn = document.getElementById('musicPlayerBtn');
        const musicPlayer = document.getElementById('musicPlayer');
        const closePlayer = document.getElementById('closePlayer');
        const audioPlayer = document.getElementById('audioPlayer');
        const audioUpload = document.getElementById('audioUpload');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playIcon = document.getElementById('playIcon');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const progressBar = document.getElementById('progressBar');
        const progress = document.getElementById('progress');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const trackName = document.getElementById('trackName');
        const trackStatus = document.getElementById('trackStatus');
        
        let isPlaying = false;
        let currentTrackIndex = 0;
        let tracks = [];
        
        // Открытие/закрытие плеера
        musicPlayerBtn.addEventListener('click', function() {
            musicPlayer.classList.toggle('show');
        });
        
        closePlayer.addEventListener('click', function() {
            musicPlayer.classList.remove('show');
        });
        
        // Загрузка аудиофайла
        audioUpload.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                audioPlayer.src = url;
                
                trackName.textContent = file.name;
                trackStatus.textContent = 'Трек загружен';
                
                tracks.push({
                    name: file.name,
                    url: url,
                    file: file
                });
                
                currentTrackIndex = tracks.length - 1;
                
                audioPlayer.play();
                isPlaying = true;
                playIcon.className = 'fas fa-pause';
                musicPlayerBtn.classList.add('playing');
            }
        });
        
        // Воспроизведение/пауза
        playPauseBtn.addEventListener('click', function() {
            if (audioPlayer.src) {
                if (isPlaying) {
                    audioPlayer.pause();
                    playIcon.className = 'fas fa-play';
                    musicPlayerBtn.classList.remove('playing');
                } else {
                    audioPlayer.play();
                    playIcon.className = 'fas fa-pause';
                    musicPlayerBtn.classList.add('playing');
                }
                isPlaying = !isPlaying;
            } else {
                trackStatus.textContent = 'Сначала загрузите трек';
            }
        });
        
        // Предыдущий трек
        prevBtn.addEventListener('click', function() {
            if (tracks.length > 0) {
                currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
                loadTrack(currentTrackIndex);
                if (isPlaying) {
                    audioPlayer.play();
                }
            }
        });
        
        // Следующий трек
        nextBtn.addEventListener('click', function() {
            if (tracks.length > 0) {
                currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
                loadTrack(currentTrackIndex);
                if (isPlaying) {
                    audioPlayer.play();
                }
            }
        });
        
        function loadTrack(index) {
            if (tracks[index]) {
                audioPlayer.src = tracks[index].url;
                trackName.textContent = tracks[index].name;
                trackStatus.textContent = 'Трек загружен';
                
                audioPlayer.addEventListener('loadedmetadata', function() {
                    updateDuration();
                });
            }
        }
        
        function updateDuration() {
            const duration = audioPlayer.duration;
            if (duration) {
                const minutes = Math.floor(duration / 60);
                const seconds = Math.floor(duration % 60);
                durationEl.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            }
        }
        
        audioPlayer.addEventListener('timeupdate', function() {
            if (audioPlayer.duration) {
                const currentTime = audioPlayer.currentTime;
                const duration = audioPlayer.duration;
                const progressPercent = (currentTime / duration) * 100;
                progress.style.width = `${progressPercent}%`;
                
                const currentMinutes = Math.floor(currentTime / 60);
                const currentSeconds = Math.floor(currentTime % 60);
                currentTimeEl.textContent = `${currentMinutes}:${currentSeconds < 10 ? '0' : ''}${currentSeconds}`;
            }
        });
        
        progressBar.addEventListener('click', function(e) {
            if (audioPlayer.duration) {
                const rect = progressBar.getBoundingClientRect();
                const offsetX = e.clientX - rect.left;
                const width = rect.width;
                const percentage = offsetX / width;
                audioPlayer.currentTime = percentage * audioPlayer.duration;
            }
        });
        
        volumeSlider.addEventListener('input', function() {
            audioPlayer.volume = this.value / 100;
        });
        
        audioPlayer.addEventListener('ended', function() {
            isPlaying = false;
            playIcon.className = 'fas fa-play';
            musicPlayerBtn.classList.remove('playing');
            trackStatus.textContent = 'Трек завершен';
            
            if (tracks.length > 0) {
                setTimeout(() => {
                    currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
                    loadTrack(currentTrackIndex);
                    audioPlayer.play();
                    isPlaying = true;
                    playIcon.className = 'fas fa-pause';
                    musicPlayerBtn.classList.add('playing');
                }, 1000);
            }
        });
        
        // Анимация появления элементов при скролле
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                }
            });
        }, observerOptions);
        
        document.querySelectorAll('.planner-container, .generator-container, .word-editor-container, .max-container').forEach(el => {
            observer.observe(el);
        });
    </script>
</body>
</html>